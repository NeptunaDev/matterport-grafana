<html>
  <head>
    <script>
      (async function () {
        const { connect } = await import(
          "https://static.matterport.com/showcase-sdk/bootstrap/3.0.0-0-g0517b8d76c/sdk.es6.js"
        );
        window.MP_SDK = { connect };
      })();
    </script>
  </head>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
  </style>
  <body>
    <div>
      <iframe
        width="1440"
        height="500"
        src="https://my.matterport.com/show?m=dKEznYeDyaM&play=1&applicationKey=9dgydths42wyhyangsu855bca"
        frameborder="0"
        allow="fullscreen *"
        id="showcase-iframe"
      ></iframe>
      <iframe src="http://localhost:3000/d-solo/fe3o4dmw6ygw0d/new-dashboard?from=1731347373477&to=1731368973477&timezone=browser&orgId=1&theme=dark&panelId=1&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
      <iframe src="http://localhost:3000/d-solo/fe3o4dmw6ygw0d/new-dashboard?from=1731347373477&to=1731368973477&timezone=browser&orgId=1&theme=dark&panelId=1&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
      <iframe src="http://localhost:3000/d-solo/fe3o4dmw6ygw0d/new-dashboard?from=1731347373477&to=1731368973477&timezone=browser&orgId=1&theme=dark&panelId=1&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
    </div>

    <script>
      (async function connectSdk() {
        // Espera hasta que el SDK estÃ© disponible en window.MP_SDK
        while (!window.MP_SDK || !window.MP_SDK.connect) {
          await new Promise((resolve) => setTimeout(resolve, 50));
        }

        const iframe = document.getElementById("showcase-iframe");

        // Conecta el SDK; logea un error si hay problemas
        try {
          const mpSdk = await window.MP_SDK.connect(iframe);
          onShowcaseConnect(mpSdk);
        } catch (e) {
          console.error(e);
        }
      })();

      async function onShowcaseConnect(mpSdk) {
        try {
          const modelData = await mpSdk.Model.getData();
          console.log("Model sid:" + modelData.sid);
        } catch (e) {
          console.error(e);
        }
      }
    </script>
  </body>
</html>
